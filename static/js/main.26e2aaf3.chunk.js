(this["webpackJsonpredux-saga"]=this["webpackJsonpredux-saga"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var r=n(211),a=n(60),c=n(0),o=n.n(c),i=n(14),s=n.n(i),u=n(29),l=n(22),d=Object(l.a)(),b=n(195),f=n(212),p=n(3);function m(e){return Object(p.jsx)("div",{children:"Not Found"})}n(93);var j=n(13);var x=n(9),g=n.n(x),h=n(20),O=n(30),v=n(201),w=n(206),y=n(203),k=n(205),S=n(216),I=n(204),N=n(64),C=n(214),L=u.e,B=n(102),R=n(197),F=n(31),U=["name","control","label"],Y=Object(b.a)((function(e){return Object(S.a)({root:{backgroundColor:"#ffffff"},inputform:{maxWidth:200,minWidth:200,background:"#ffffff",margin:"0 20px 0 0"}})}));function T(e){var t=e.name,n=e.control,r=e.label,a=Object(B.a)(e,U),c=Y(),o=Object(F.a)({name:t,control:n}),i=o.field,s=i.value,u=i.onChange,l=i.onBlur,d=i.ref,b=o.fieldState,f=b.invalid,m=b.error;return Object(p.jsx)(R.a,{className:c.inputform,size:"small",margin:"normal",value:s,onChange:u,onBlur:l,label:r,variant:"outlined",inputRef:d,error:f,helperText:null===m||void 0===m?void 0:m.message,inputProps:a})}n(161),n(157),n(200),n(159),n(213),n(215);n(163),n(202),n(158);var z=n(40),P={isLoggedIn:!1,logging:!1,currentUser:void 0,isRegister:!1},q=Object(z.c)({name:"auth",initialState:P,reducers:{login:function(e,t){e.logging=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.logging=!1,e.currentUser=t.payload},loginFailed:function(e,t){e.logging=!1,e.isLoggedIn=!1},logout:function(e){e.isLoggedIn=!1,e.currentUser=void 0},register:function(e,t){e.isRegister=!0},registerSuccess:function(e,t){e.isRegister=!0,e.currentUser=t.payload},registerFailed:function(e,t){e.isRegister=!1}}}),D=q.actions,H=function(e){return e.auth.isLoggedIn},V=function(e){return e.auth.currentUser},W=function(e){return e.auth.isRegister},A=q.reducer,M=Object(b.a)((function(e){return Object(S.a)({root:{backgroundColor:"#ffffff"},header:{display:"flex",justifyContent:"space-between",background:"#ffffff",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:100},title:{fontSize:24,color:"#000",cursor:"pointer"},button:{backgroundColor:"#ffffff",color:"#000",padding:"6px 16px",marginRight:10,"&:hover":{background:"#ffffff"}},groupsInput:{display:"flex",alignItems:"center"," &> .MuiInputBase-root":{background:"red"}},formContainer:{display:"flex",alignItems:"center"},name:{color:"#000",marginRight:15},boxName:{display:"flex",alignItems:"center"}})}));function E(e){var t=e.initialValues,n=(e.onSubmit,M()),r=Object(u.d)(),a=L(H),o=L(V),i=L(W),s=Object(c.useState)({}),l=Object(O.a)(s,2),d=l[0],b=l[1],m=Object(c.useState)(!1),x=Object(O.a)(m,2),S=x[0],B=x[1],R=Object(c.useState)(localStorage.getItem("user")),U=Object(O.a)(R,2),Y=U[0],z=(U[1],Object(c.useState)(localStorage.getItem("username"))),P=Object(O.a)(z,2),q=P[0],A=(P[1],Object(j.g)()),E=Object(F.b)({defaultValues:t}),J=E.control,X=E.handleSubmit,$=E.formState.isSubmitting,_=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{b(t),r(D.login({username:t.username,password:t.password}))}catch(n){console.log("Login fail",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){((null===o||void 0===o?void 0:o.error)||i)&&(localStorage.removeItem("token"),r(D.register({username:d.username,password:d.password})),B(!0),setTimeout((function(){window.location.replace("/")}),1e3)),a&&o&&(localStorage.setItem("user",null===o||void 0===o?void 0:o.token),localStorage.setItem("username",null===o||void 0===o?void 0:o.name),setTimeout((function(){window.location.replace("/")}),1e3)),i&&o&&(localStorage.setItem("user",null===o||void 0===o?void 0:o.token),localStorage.setItem("username",null===o||void 0===o?void 0:o.name),setTimeout((function(){window.location.replace("/")}),1e3))}),[r,a,o,i]),Object(p.jsxs)("div",{className:n.root,children:[S?Object(p.jsx)(C.a,{action:Object(p.jsx)(v.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return B(!1)},children:"X"}),variant:"outlined",severity:"success",children:"Register Success"}):null,Object(p.jsx)(y.a,{position:"static",children:Object(p.jsxs)(I.a,{className:n.header,children:[Object(p.jsx)(N.a,{variant:"h6",className:n.title,onClick:function(){return A.push("/")},children:"Funny Movie"}),Object(p.jsxs)(f.a,{className:n.formContainer,children:[null===Y||void 0===Y?Object(p.jsx)(f.a,{children:Object(p.jsx)("form",{onSubmit:X(_),children:Object(p.jsxs)(f.a,{className:n.groupsInput,children:[Object(p.jsx)(T,{label:"Username",control:J,type:"text",name:"username"}),Object(p.jsx)(T,{label:"Password",control:J,type:"password",name:"password"}),Object(p.jsxs)(k.a,{className:n.button,type:"submit",variant:"contained",color:"primary",disabled:$,children:[$&&Object(p.jsx)(w.a,{size:16,color:"primary"})," Login"]})]})})}):null,Object(p.jsx)(f.a,{className:n.boxName,children:Y?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(N.a,{className:n.name,children:["Hi ",q&&q,"!"]}),Object(p.jsx)(k.a,{onClick:function(){A.push("/share")},className:n.button,variant:"contained",color:"primary",children:"Share"})]}):null}),Object(p.jsx)(f.a,{children:null!==Y?Object(p.jsx)(k.a,{onClick:function(){r(D.logout()),localStorage.removeItem("user"),localStorage.removeItem("username"),window.location.replace("/")},className:n.button,variant:"contained",color:"primary",children:"Logout"}):null})]})]})})]})}n(199),n(162),n(207),n(209),n(208),n(210),n(50),Object(b.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},link:{color:"inherit",textDecoration:"none","&.active > div":{backgroundColor:e.palette.action.selected}}}}));var J=n(164),X=Object(z.c)({name:"youtube",initialState:{loading:!1,list:[]},reducers:{fetchYoutubeList:function(e){e.loading=!0},fetchYoutubeListSuccess:function(e,t){console.log("action.payload",t),e.list=t.payload.data,e.loading=!1},fetchYoutubeListFailed:function(e){e.loading=!1}}}),$=X.actions,_=function(e){return e.youtube.list},G=X.reducer,K=Object(J.a)((function(e){return{root:{width:"80%",margin:"auto"},main:{display:"flex",flexDirection:"column",alignItems:"center"},box:{display:"flex",justifyContent:"space-between",width:"70%",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:300,marginBottom:10},left:{flex:1},right:{flex:1,padding:10},des:{fontStyle:"italic"},text:{fontStyle:"italic"}}}));function Q(){var e=K(),t=Object(u.d)(),n=Object(u.e)(_);return Object(c.useEffect)((function(){t($.fetchYoutubeList())}),[t]),Object(p.jsx)(f.a,{className:e.root,children:Object(p.jsx)(f.a,{className:e.main,children:n?n.map((function(t,n){return Object(p.jsxs)(f.a,{className:e.box,children:[Object(p.jsx)(f.a,{className:e.left,children:Object(p.jsx)("iframe",{width:"100%",height:"100%",src:t.source,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Object(p.jsxs)(f.a,{className:e.right,children:[Object(p.jsxs)(N.a,{variant:"h6",children:["Title ",n+1]}),Object(p.jsx)(N.a,{className:e.des,variant:"body2",children:"Discription:"}),Object(p.jsx)(N.a,{className:e.text,variant:"body2",children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Cumque, similique saepe? Libero numquam sequi voluptatem commodi expedita, ratione non sint, dignissimos quaerat explicabo porro nemo aperiam, omnis ipsum tempora debitis!"})]})]},n)})):null})})}var Z=n(99),ee=n.n(Z).a.create({baseURL:"https://share-youtube-node.herokuapp.com/api",headers:{"Content-Type":"application/json"}});ee.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),ee.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var te=ee,ne={getAll:function(){return te.get("/share/list")},share:function(e){return te.post("/share",e)}},re=Object(b.a)((function(e){return{root:{width:"80%",margin:"auto"},main:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},box:{display:"flex",justifyContent:"center",width:"50%",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:300,marginBottom:10,alignItems:"center"},groupsInput:{display:"flex",alignItems:"center"," &> .MuiInputBase-root":{background:"red"},justifyContent:"center"},button:{backgroundColor:"#ffffff",color:"#000",padding:"6px 16px",marginRight:10,"&:hover":{background:"#ffffff"}},hint:{fontSize:14,fontStyle:"italic",color:"grey",marginBottom:10}}}));function ae(e){var t=e.initialValues,n=(e.onSubmit,re()),r=Object(j.g)(),a=Object(F.b)({defaultValues:t}),c=a.control,o=a.handleSubmit,i=a.formState.isSubmitting,s=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("formValues",t),e.prev=1,e.next=4,ne.share(t);case 4:r.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Failed to share",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(f.a,{className:n.root,children:Object(p.jsx)(f.a,{className:n.main,children:Object(p.jsx)(f.a,{className:n.box,children:Object(p.jsxs)("form",{onSubmit:o(s),children:[Object(p.jsx)(N.a,{className:n.hint,children:"Please input like format *https://www.youtube.com/embed/-_X6PhkjpzU"}),Object(p.jsxs)(f.a,{className:n.groupsInput,children:[Object(p.jsx)(T,{label:"Youtube Url",control:c,type:"text",name:"source"}),Object(p.jsxs)(k.a,{className:n.button,type:"submit",variant:"contained",color:"primary",disabled:i,children:[i&&Object(p.jsx)(w.a,{size:16,color:"primary"})," Share"]})]})]})})})})}var ce=Object(b.a)((function(e){return{root:{display:"flex",width:"100%",flexDirection:"column",minHeight:"100vh"},header:{width:"100%",backgroundColor:"#ffffff"},main:{width:"100%",backgroundColor:e.palette.background.paper,padding:e.spacing(2,3)}}}));function oe(){var e=ce();return Object(p.jsx)(f.a,{className:e.root,children:Object(p.jsx)(f.a,{className:e.main,children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",children:Object(p.jsx)(Q,{})}),Object(p.jsx)(j.b,{path:"/share",children:Object(p.jsx)(ae,{})})]})})})}var ie=Object(b.a)((function(e){return{header:{width:"100%",backgroundColor:"#ffffff"}}}));var se=function(){var e=ie();return Object(p.jsxs)("div",{children:[Object(p.jsx)(f.a,{className:e.header,children:Object(p.jsx)(E,{})}),Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{path:"/",children:Object(p.jsx)(oe,{})}),Object(p.jsx)(j.b,{children:Object(p.jsx)(m,{})})]})]})},ue=n(28),le=n(92),de=n(101);function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var fe=Object(z.b)("counter/fetchCount",function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=Object(z.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload},incrementSaga:function(e,t){e.status="loading"},incrementSagaSuccess:function(e,t){e.status="idle",e.value+=t.payload}},extraReducers:function(e){e.addCase(fe.pending,(function(e){e.status="loading"})).addCase(fe.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),me=pe.actions,je=(me.increment,me.decrement,me.incrementByAmount,me.incrementSaga,me.incrementSagaSuccess,pe.reducer),xe=n(66),ge={register:function(e){console.log("data",e);var t=e.username,n=e.password;return te.post("/register",{username:t,password:n})},login:function(e){console.log("data",e);var t=e.username,n=e.password;return te.post("/login",{username:t,password:n})}},he=n(21),Oe=n(17),ve=g.a.mark(Ie),we=g.a.mark(Ne),ye=g.a.mark(Ce),ke=g.a.mark(Le),Se=g.a.mark(Be);function Ie(e){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Oe.a)(ge.login,e);case 3:return t=n.sent,localStorage.setItem("token",t.token),n.next=7,Object(Oe.c)(D.loginSuccess(t));case 7:return n.next=9,Object(Oe.c)(Object(he.d)("/"));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(0),console.log(n.t0),n.next=16,Object(Oe.c)(D.loginFailed(n.t0.message));case 16:case"end":return n.stop()}}),ve,null,[[0,11]])}function Ne(e){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Oe.a)(ge.register,e);case 3:return t=n.sent,localStorage.setItem("token",t.token),n.next=7,Object(Oe.c)(D.registerSuccess(t));case 7:return n.next=9,Object(Oe.c)(Object(he.d)("/"));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(0),console.log(n.t0),n.next=16,Object(Oe.c)(D.registerFailed(n.t0.message));case 16:case"end":return n.stop()}}),we,null,[[0,11]])}function Ce(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("token"),e.next=3,Object(Oe.c)(Object(he.d)("/"));case 3:case"end":return e.stop()}}),ye)}function Le(){var e,t,n,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=Boolean(localStorage.getItem("token")),t=localStorage.getItem("token"),e){a.next=9;break}return a.next=6,Object(Oe.d)(D.login.type);case 6:return n=a.sent,a.next=9,Object(Oe.b)(Ie,n.payload);case 9:if(!t){a.next=14;break}return a.next=12,Object(Oe.c)(Object(he.d)("/"));case 12:a.next=19;break;case 14:return a.next=16,Object(Oe.d)(D.register.type);case 16:return r=a.sent,a.next=19,Object(Oe.b)(Ne,r.payload);case 19:return a.next=21,Object(Oe.d)(D.logout.type);case 21:return a.next=23,Object(Oe.a)(Ce);case 23:a.next=0;break;case 25:case"end":return a.stop()}}),ke)}function Be(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.b)(Le);case 2:case"end":return e.stop()}}),Se)}var Re=g.a.mark(Ue),Fe=g.a.mark(Ye);function Ue(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Oe.a)(ne.getAll);case 3:return e=t.sent,t.next=6,Object(Oe.c)($.fetchYoutubeListSuccess(e));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log("failed to fetch youtube list",t.t0),t.next=13,Object(Oe.c)($.fetchYoutubeListFailed());case 13:case"end":return t.stop()}}),Re,null,[[0,8]])}function Ye(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.e)($.fetchYoutubeList,Ue);case 2:case"end":return e.stop()}}),Fe)}var Te=g.a.mark(ze);function ze(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(xe.a)([Be(),Ye()]);case 2:case"end":return e.stop()}}),Te)}var Pe=Object(ue.b)({router:Object(a.b)(d),counter:je,auth:A,youtube:G}),qe=Object(de.a)(),De=Object(z.a)({reducer:Pe,middleware:function(e){return e().concat(qe,Object(le.a)(d))}});qe.run(ze);n(152),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(u.a,{store:De,children:Object(p.jsxs)(a.a,{history:d,children:[Object(p.jsx)(r.a,{}),Object(p.jsx)(se,{})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.26e2aaf3.chunk.js.map