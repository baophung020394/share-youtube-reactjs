(this["webpackJsonpredux-saga"]=this["webpackJsonpredux-saga"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var r=n(211),a=n(60),c=n(0),o=n.n(c),i=n(14),s=n.n(i),u=n(29),l=n(22),d=Object(l.a)(),b=n(195),f=n(212),m=n(3);function p(e){return Object(m.jsx)("div",{children:"Not Found"})}n(93);var j=n(13);var x=n(9),g=n.n(x),h=n(20),O=n(30),v=n(201),w=n(206),y=n(203),S=n(205),k=n(216),I=n(204),N=n(64),C=n(214),L=n(96),B=n.n(L).a.create({baseURL:"https://share-youtube-node.herokuapp.com/api",headers:{"Content-Type":"application/json"}});B.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),B.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var R=B,F={register:function(e){console.log("data",e);var t=e.username,n=e.password;return R.post("/register",{username:t,password:n})},login:function(e){console.log("data",e);var t=e.username,n=e.password;return R.post("/login",{username:t,password:n})}},U=u.e,Y=n(102),z=n(197),P=n(31),q=["name","control","label"],D=Object(b.a)((function(e){return Object(k.a)({root:{backgroundColor:"#ffffff"},inputform:{maxWidth:200,minWidth:200,background:"#ffffff",margin:"0 20px 0 0"}})}));function H(e){var t=e.name,n=e.control,r=e.label,a=Object(Y.a)(e,q),c=D(),o=Object(P.a)({name:t,control:n}),i=o.field,s=i.value,u=i.onChange,l=i.onBlur,d=i.ref,b=o.fieldState,f=b.invalid,p=b.error;return Object(m.jsx)(z.a,{className:c.inputform,size:"small",margin:"normal",value:s,onChange:u,onBlur:l,label:r,variant:"outlined",inputRef:d,error:f,helperText:null===p||void 0===p?void 0:p.message,inputProps:a})}n(161),n(157),n(200),n(159),n(213),n(215);n(163),n(202),n(158);var T=n(40),V={isLoggedIn:!1,logging:!1,currentUser:void 0,isRegister:!1},W=Object(T.c)({name:"auth",initialState:V,reducers:{login:function(e,t){e.logging=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.logging=!1,e.currentUser=t.payload},loginFailed:function(e,t){e.logging=!1,e.isLoggedIn=!1},logout:function(e){e.isLoggedIn=!1,e.currentUser=void 0},register:function(e,t){e.isRegister=!0},registerSuccess:function(e,t){e.isRegister=!0,e.currentUser=t.payload},registerFailed:function(e,t){e.isRegister=!1}}}),A=W.actions,M=function(e){return e.auth.isLoggedIn},E=function(e){return e.auth.currentUser},J=function(e){return e.auth.isRegister},X=W.reducer,$=Object(b.a)((function(e){return Object(k.a)({root:{backgroundColor:"#ffffff"},header:{display:"flex",justifyContent:"space-between",background:"#ffffff",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:100},title:{fontSize:24,color:"#000",cursor:"pointer"},button:{backgroundColor:"#ffffff",color:"#000",padding:"6px 16px",marginRight:10,"&:hover":{background:"#ffffff"}},groupsInput:{display:"flex",alignItems:"center"," &> .MuiInputBase-root":{background:"red"}},formContainer:{display:"flex",alignItems:"center"},name:{color:"#000",marginRight:15},boxName:{display:"flex",alignItems:"center"}})}));function _(e){var t=e.initialValues,n=(e.onSubmit,$()),r=Object(u.d)(),a=U(M),o=U(E),i=U(J),s=Object(c.useState)({}),l=Object(O.a)(s,2),d=l[0],b=l[1],p=Object(c.useState)(!1),x=Object(O.a)(p,2),k=x[0],L=x[1],B=Object(c.useState)(localStorage.getItem("user")),R=Object(O.a)(B,2),Y=R[0],z=(R[1],Object(c.useState)(localStorage.getItem("username"))),q=Object(O.a)(z,2),D=q[0],T=(q[1],Object(j.g)()),V=Object(P.b)({defaultValues:t}),W=V.control,X=V.handleSubmit,_=V.formState.isSubmitting,G=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{b(t),r(A.login({username:t.username,password:t.password}))}catch(n){console.log("Login fail",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){((null===o||void 0===o?void 0:o.error)||i)&&(localStorage.removeItem("token"),F.register(d),L(!0),window.location.replace("/admin/home")),a&&o&&(localStorage.setItem("user",null===o||void 0===o?void 0:o.token),localStorage.setItem("username",null===o||void 0===o?void 0:o.name)),o&&window.location.replace("/admin/home")}),[r,a,o]),Object(m.jsxs)("div",{className:n.root,children:[k?Object(m.jsx)(C.a,{action:Object(m.jsx)(v.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return L(!1)},children:"X"}),variant:"outlined",severity:"success",children:"Register Success"}):null,Object(m.jsx)(y.a,{position:"static",children:Object(m.jsxs)(I.a,{className:n.header,children:[Object(m.jsx)(N.a,{variant:"h6",className:n.title,onClick:function(){return T.push("/")},children:"Funny Movie"}),Object(m.jsxs)(f.a,{className:n.formContainer,children:[null===Y||void 0===Y?Object(m.jsx)(f.a,{children:Object(m.jsx)("form",{onSubmit:X(G),children:Object(m.jsxs)(f.a,{className:n.groupsInput,children:[Object(m.jsx)(H,{label:"Username",control:W,type:"text",name:"username"}),Object(m.jsx)(H,{label:"Password",control:W,type:"password",name:"password"}),Object(m.jsxs)(S.a,{className:n.button,type:"submit",variant:"contained",color:"primary",disabled:_,children:[_&&Object(m.jsx)(w.a,{size:16,color:"primary"})," Login"]})]})})}):null,Object(m.jsx)(f.a,{className:n.boxName,children:Y?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(N.a,{className:n.name,children:["Hi ",D&&D,"!"]}),Object(m.jsx)(S.a,{onClick:function(){T.push("/admin/share")},className:n.button,variant:"contained",color:"primary",children:"Share"})]}):null}),Object(m.jsx)(f.a,{children:null!==Y?Object(m.jsx)(S.a,{onClick:function(){r(A.logout()),localStorage.removeItem("user"),localStorage.removeItem("username"),window.location.replace("/admin/home")},className:n.button,variant:"contained",color:"primary",children:"Logout"}):null})]})]})})]})}n(199),n(162),n(207),n(209),n(208),n(210),n(50),Object(b.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},link:{color:"inherit",textDecoration:"none","&.active > div":{backgroundColor:e.palette.action.selected}}}}));var G=n(164),K=Object(T.c)({name:"youtube",initialState:{loading:!1,list:[]},reducers:{fetchYoutubeList:function(e){e.loading=!0},fetchYoutubeListSuccess:function(e,t){console.log("action.payload",t),e.list=t.payload.data,e.loading=!1},fetchYoutubeListFailed:function(e){e.loading=!1}}}),Q=K.actions,Z=function(e){return e.youtube.list},ee=K.reducer,te=Object(G.a)((function(e){return{root:{width:"80%",margin:"auto"},main:{display:"flex",flexDirection:"column",alignItems:"center"},box:{display:"flex",justifyContent:"space-between",width:"70%",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:300,marginBottom:10},left:{flex:1},right:{flex:1,padding:10},des:{fontStyle:"italic"},text:{fontStyle:"italic"}}}));function ne(){var e=te(),t=Object(u.d)(),n=Object(u.e)(Z);return Object(c.useEffect)((function(){t(Q.fetchYoutubeList())}),[t]),Object(m.jsx)(f.a,{className:e.root,children:Object(m.jsx)(f.a,{className:e.main,children:n?n.map((function(t,n){return Object(m.jsxs)(f.a,{className:e.box,children:[Object(m.jsx)(f.a,{className:e.left,children:Object(m.jsx)("iframe",{width:"100%",height:"100%",src:t.source,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),Object(m.jsxs)(f.a,{className:e.right,children:[Object(m.jsxs)(N.a,{variant:"h6",children:["Title ",n+1]}),Object(m.jsx)(N.a,{className:e.des,variant:"body2",children:"Discription:"}),Object(m.jsx)(N.a,{className:e.text,variant:"body2",children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Cumque, similique saepe? Libero numquam sequi voluptatem commodi expedita, ratione non sint, dignissimos quaerat explicabo porro nemo aperiam, omnis ipsum tempora debitis!"})]})]},n)})):null})})}var re=Object(b.a)((function(e){return{root:{display:"flex",width:"100%",flexDirection:"column",minHeight:"100vh"},header:{width:"100%",backgroundColor:"#ffffff"},main:{width:"100%",backgroundColor:e.palette.background.paper,padding:e.spacing(2,3)}}}));function ae(){var e=re();return Object(m.jsx)(f.a,{className:e.root,children:Object(m.jsx)(f.a,{className:e.main,children:Object(m.jsx)(j.d,{children:Object(m.jsx)(j.b,{path:"/admin/home",children:Object(m.jsx)(ne,{})})})})})}var ce={getAll:function(){return R.get("/share/list")},share:function(e){return R.post("/share",e)}},oe=Object(b.a)((function(e){return{root:{width:"80%",margin:"auto"},main:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"},box:{display:"flex",justifyContent:"center",width:"50%",boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",minHeight:300,marginBottom:10,alignItems:"center"},groupsInput:{display:"flex",alignItems:"center"," &> .MuiInputBase-root":{background:"red"},justifyContent:"center"},button:{backgroundColor:"#ffffff",color:"#000",padding:"6px 16px",marginRight:10,"&:hover":{background:"#ffffff"}},hint:{fontSize:14,fontStyle:"italic",color:"grey",marginBottom:10}}}));function ie(e){var t=e.initialValues,n=(e.onSubmit,oe()),r=Object(j.g)(),a=Object(P.b)({defaultValues:t}),c=a.control,o=a.handleSubmit,i=a.formState.isSubmitting,s=function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("formValues",t),e.prev=1,e.next=4,ce.share(t);case 4:r.push("/admin/home"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Failed to share",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(f.a,{className:n.root,children:Object(m.jsx)(f.a,{className:n.main,children:Object(m.jsx)(f.a,{className:n.box,children:Object(m.jsxs)("form",{onSubmit:o(s),children:[Object(m.jsx)(N.a,{className:n.hint,children:"Please input like format *https://www.youtube.com/embed/-_X6PhkjpzU"}),Object(m.jsxs)(f.a,{className:n.groupsInput,children:[Object(m.jsx)(H,{label:"Youtube Url",control:c,type:"text",name:"source"}),Object(m.jsxs)(S.a,{className:n.button,type:"submit",variant:"contained",color:"primary",disabled:i,children:[i&&Object(m.jsx)(w.a,{size:16,color:"primary"})," Share"]})]})]})})})})}var se=Object(b.a)((function(e){return{header:{width:"100%",backgroundColor:"#ffffff"}}}));var ue=function(){var e=se();return Object(m.jsxs)("div",{children:[Object(m.jsx)(f.a,{className:e.header,children:Object(m.jsx)(_,{})}),Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",children:Object(m.jsx)(j.a,{to:"/admin/home"})}),Object(m.jsx)(j.b,{path:"/admin/home",children:Object(m.jsx)(ae,{})}),Object(m.jsx)(j.b,{path:"/admin/share",children:Object(m.jsx)(ie,{})}),Object(m.jsx)(j.b,{children:Object(m.jsx)(p,{})})]})]})},le=n(28),de=n(92),be=n(101);function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var me=Object(T.b)("counter/fetchCount",function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=Object(T.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload},incrementSaga:function(e,t){e.status="loading"},incrementSagaSuccess:function(e,t){e.status="idle",e.value+=t.payload}},extraReducers:function(e){e.addCase(me.pending,(function(e){e.status="loading"})).addCase(me.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),je=pe.actions,xe=(je.increment,je.decrement,je.incrementByAmount,je.incrementSaga,je.incrementSagaSuccess,pe.reducer),ge=n(66),he=n(21),Oe=n(17),ve=g.a.mark(ke),we=g.a.mark(Ie),ye=g.a.mark(Ne),Se=g.a.mark(Ce);function ke(e){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Oe.a)(F.login,e);case 3:return t=n.sent,localStorage.setItem("token",t.token),n.next=7,Object(Oe.c)(A.loginSuccess(t));case 7:return n.next=9,Object(Oe.c)(Object(he.d)("/admin/home"));case 9:n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(0),console.log(n.t0),n.next=16,Object(Oe.c)(A.loginFailed(n.t0.message));case 16:case"end":return n.stop()}}),ve,null,[[0,11]])}function Ie(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("token"),e.next=3,Object(Oe.c)(Object(he.d)("/admin/home"));case 3:case"end":return e.stop()}}),we)}function Ne(){var e,t,n;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=Boolean(localStorage.getItem("token")),t=localStorage.getItem("token"),e){r.next=9;break}return r.next=6,Object(Oe.d)(A.login.type);case 6:return n=r.sent,r.next=9,Object(Oe.b)(ke,n.payload);case 9:if(!t){r.next=12;break}return r.next=12,Object(Oe.c)(Object(he.d)("/admin/home"));case 12:return r.next=14,Object(Oe.d)(A.logout.type);case 14:return r.next=16,Object(Oe.a)(Ie);case 16:r.next=0;break;case 18:case"end":return r.stop()}}),ye)}function Ce(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.b)(Ne);case 2:case"end":return e.stop()}}),Se)}var Le=g.a.mark(Re),Be=g.a.mark(Fe);function Re(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Oe.a)(ce.getAll);case 3:return e=t.sent,t.next=6,Object(Oe.c)(Q.fetchYoutubeListSuccess(e));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log("failed to fetch youtube list",t.t0),t.next=13,Object(Oe.c)(Q.fetchYoutubeListFailed());case 13:case"end":return t.stop()}}),Le,null,[[0,8]])}function Fe(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Oe.e)(Q.fetchYoutubeList,Re);case 2:case"end":return e.stop()}}),Be)}var Ue=g.a.mark(Ye);function Ye(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.a)([Ce(),Fe()]);case 2:case"end":return e.stop()}}),Ue)}var ze=Object(le.b)({router:Object(a.b)(d),counter:xe,auth:X,youtube:ee}),Pe=Object(be.a)(),qe=Object(T.a)({reducer:ze,middleware:function(e){return e().concat(Pe,Object(de.a)(d))}});Pe.run(Ye);n(152),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(u.a,{store:qe,children:Object(m.jsxs)(a.a,{history:d,children:[Object(m.jsx)(r.a,{}),Object(m.jsx)(ue,{})]})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[153,1,2]]]);
//# sourceMappingURL=main.ca396906.chunk.js.map